var treatmentByComplaintAndCode = {
    "Malaria": {
        "X1": {
            "1": [
                {
                    "Medicine": "Chloroquin Syrup",
                    "Amount": 0.5,
                    "Dose Unit": "Spoon",
                    "Times": 1
                },
                {
                    "Medicine": "Paracetamol Syrup",
                    "Amount": 0.5,
                    "Dose Unit": "Spoon",
                    "Times": 3
                }],
            "2": [
                {
                    "Medicine": "Chloroquin Syrup",
                    "Amount": 0.5,
                    "Dose Unit": "Spoon",
                    "Times": 1
                },
                {
                    "Medicine": "Paracetamol Syrup",
                    "Amount": 0.5,
                    "Dose Unit": "Spoon",
                    "Times": 3
                }],
            "3": [
                {
                    "Medicine": "Chloroquin Syrup",
                    "Amount": 0.5,
                    "Dose Unit": "Spoon",
                    "Times": 1
                },
                {
                    "Medicine": "Paracetamol Syrup",
                    "Amount": 0.5,
                    "Dose Unit": "Spoon",
                    "Times": 3
                }]
        },
        "X2": {
            "1": [
                {
                    "Medicine": "Chloroquin Syrup",
                    "Amount": 1,
                    "Dose Unit": "Spoon Syrup",
                    "Times": 1
                },
                {
                    "Medicine": "Paracetamol Syrup",
                    "Dose Unit": "Spoon",
                    "Amount": 1,
                    "Times": 3
                }],
            "2": [
                {
                    "Medicine": "Chloroquin Syrup",
                    "Dose Unit": "Spoon",
                    "Amount": 1,
                    "Times": 1
                },
                {
                    "Medicine": "Paracetamol Syrup",
                    "Amount": 1,
                    "Dose Unit": "Spoon",
                    "Times": 3
                }],
            "3": [
                {
                    "Medicine": "Chloroquin Syrup",
                    "Amount": 0.5,
                    "Dose Unit": "Spoon",
                    "Times": 1
                },
                {
                    "Medicine": "Paracetamol Syrup",
                    "Amount": 1,
                    "Dose Unit": "Spoon",
                    "Times": 3
                }]
        },
        "X3": {
            "1": [
                {
                    "Medicine": "Chloroquin Syrup",
                    "Amount": 2,
                    "Dose Unit": "Spoon",
                    "Times": 1
                },
                {
                    "Medicine": "Paracetamol Syrup",
                    "Amount": 1.5,
                    "Dose Unit": "Spoon",
                    "Times": 3
                }],
            "2": [
                {
                    "Medicine": "Chloroquin Syrup",
                    "Amount": 2,
                    "Dose Unit": "Spoon",
                    "Times": 1
                },
                {
                    "Medicine": "Paracetamol Syrup",
                    "Amount": 1.5,
                    "Dose Unit": "Spoon",
                    "Times": 3
                }],
            "3": [
                {
                    "Medicine": "Chloroquin Syrup",
                    "Amount": 1,
                    "Dose Unit": "Spoon",
                    "Times": 1
                },
                {
                    "Medicine": "Paracetamol Syrup",
                    "Amount": 1.5,
                    "Dose Unit": "Spoon",
                    "Times": 3
                }]
        },
        "X4": {
            "1": [
                {
                    "Medicine": "Chloroquin",
                    "Amount": 1,
                    "Dose Unit": "Tablet",
                    "Times": 1
                },
                {
                    "Medicine": "Paracetamol",
                    "Amount": 0.5,
                    "Dose Unit": "Tablet",
                    "Times": 2
                }],
            "2": [
                {
                    "Medicine": "Chloroquin",
                    "Amount": 1,
                    "Dose Unit": "Tablet",
                    "Times": 1
                },
                {
                    "Medicine": "Paracetamol",
                    "Amount": 0.5,
                    "Dose Unit": "Tablet",
                    "Times": 2
                }],
            "3": [
                {
                    "Medicine": "Chloroquin",
                    "Amount": 0.5,
                    "Dose Unit": "Tablet",
                    "Times": 1
                },
                {
                    "Medicine": "Paracetamol",
                    "Amount": 0.5,
                    "Dose Unit": "Tablet",
                    "Times": 2
                }]
        },
        "X5": {
            "1": [
                {
                    "Medicine": "Chloroquin",
                    "Amount": 2,
                    "Dose Unit": "Tablet",
                    "Times": 1
                },
                {
                    "Medicine": "Paracetamol",
                    "Amount": 0.5,
                    "Dose Unit": "Tablet",
                    "Times": 3
                }],
            "2": [
                {
                    "Medicine": "Chloroquin",
                    "Amount": 2,
                    "Dose Unit": "Tablet",
                    "Times": 1
                },
                {
                    "Medicine": "Paracetamol",
                    "Amount": 0.5,
                    "Dose Unit": "Tablet",
                    "Times": 3
                }],
            "3": [
                {
                    "Medicine": "Chloroquin",
                    "Amount": 1,
                    "Dose Unit": "Tablet",
                    "Times": 1
                },
                {
                    "Medicine": "Paracetamol",
                    "Amount": 0.5,
                    "Dose Unit": "Tablet",
                    "Times": 3
                }]
        },
        "X6": {
            "1": [
                {
                    "Medicine": "Chloroquin",
                    "Amount": 3,
                    "Dose Unit": "Tablet",
                    "Times": 1
                },
                {
                    "Medicine": "Paracetamol",
                    "Amount": 1,
                    "Dose Unit": "Tablet",
                    "Times": 2
                }],
            "2": [
                {
                    "Medicine": "Chloroquin",
                    "Amount": 3,
                    "Dose Unit": "Tablet",
                    "Times": 1
                },
                {
                    "Medicine": "Paracetamol",
                    "Amount": 1,
                    "Dose Unit": "Tablet",
                    "Times": 2
                }],
            "3": [
                {
                    "Medicine": "Chloroquin",
                    "Amount": 1.5,
                    "Dose Unit": "Tablet",
                    "Times": 1
                },
                {
                    "Medicine": "Paracetamol",
                    "Amount": 1,
                    "Dose Unit": "Tablet",
                    "Times": 2
                }]
        },
        "X7": {
            "1": [
                {
                    "Medicine": "Chloroquin",
                    "Amount": 4,
                    "Dose Unit": "Tablet",
                    "Times": 1
                },
                {
                    "Medicine": "Paracetamol",
                    "Amount": 1,
                    "Dose Unit": "Tablet",
                    "Times": 3
                }],
            "2": [
                {
                    "Medicine": "Chloroquin",
                    "Amount": 4,
                    "Dose Unit": "Tablet",
                    "Times": 1
                },
                {
                    "Medicine": "Paracetamol",
                    "Amount": 1,
                    "Dose Unit": "Tablet",
                    "Times": 3
                }],
            "3": [
                {
                    "Medicine": "Chloroquin",
                    "Amount": 2,
                    "Dose Unit": "Tablet",
                    "Times": 1
                },
                {
                    "Medicine": "Paracetamol",
                    "Amount": 1,
                    "Dose Unit": "Tablet",
                    "Times": 3
                }]
        }
    },
    "Chloroquine Resistant Malaria": {
        "X1": {
            "3": [
                {
                    "Medicine": "Lonart Forte",
                    "Amount": 0.5,
                    "Dose Unit": "Tablet",
                    "Times": 2
                }]
        },
        "X2": {
            "3": [
                {
                    "Medicine": "Lonart Forte",
                    "Amount": 1,
                    "Dose Unit": "Tablet",
                    "Times": 2
                }]
        },
        "X3": {
            "3": [
                {
                    "Medicine": "Lonart Forte",
                    "Amount": 1.5,
                    "Dose Unit": "Tablet",
                    "Times": 2
                }]
        },
        "X4": {
            "3": [
                {
                    "Medicine": "Lonart Forte",
                    "Amount": 2,
                    "Dose Unit": "Tablet",
                    "Times": 2
                }]
        },
    },
    "Cold": {
        "X1": {
            "3-5": [
                {
                    "Medicine": "Cetrizine Syrup",
                    "Amount": 0.25,
                    "Dose Unit": "Spoon",
                    "Times": "Once Evening"
                }
            ]
        },
        "X2": {
            "3-5": [
                {
                    "Medicine": "Cetrizine Syrup",
                    "Amount": 0.5,
                    "Dose Unit": "Spoon",
                    "Times": "Once Evening"
                }
            ]
        },
        "X3": {
            "3-5": [
                {
                    "Medicine": "Cetrizine Syrup",
                    "Amount": 0.5,
                    "Dose Unit": "Spoon",
                    "Times": "Once Evening"
                }
            ]
        },
        "X4": {
            "3-5": [
                {
                    "Medicine": "Cetrizine Syrup",
                    "Amount": 1,
                    "Dose Unit": "Spoon",
                    "Times": "Once Evening"
                }
            ]
        },
        "X5": {
            "3-5": [
                {
                    "Medicine": "Cetrizine",
                    "Amount": 0.5,
                    "Dose Unit": "Tablet",
                    "Times": "Once Evening"
                }
            ]
        },
        "X6": {
            "3-5": [
                {
                    "Medicine": "Cetrizine",
                    "Amount": 0.5,
                    "Dose Unit": "Tablet",
                    "Times": "Once Evening"
                }
            ]
        },
        "X7": {
            "3-5": [
                {
                    "Medicine": "Cetrizine",
                    "Amount": 1,
                    "Dose Unit": "Tablet",
                    "Times": "Once Evening"
                }
            ]
        }
    },
    "Cough": {
        "X1": {
            "1-5": [
                {
                    "Medicine": "Septran Syrup",
                    "Amount": 0.5,
                    "Dose Unit": "Spoon",
                    "Times": "2"
                }
            ]
        },
        "X2": {
            "1-5": [
                {
                    "Medicine": "Septran Syrup",
                    "Amount": 0.5,
                    "Dose Unit": "Spoon",
                    "Times": "2"
                }
            ]
        },
        "X3": {
            "1-5": [
                {
                    "Medicine": "Septran Syrup",
                    "Amount": 1,
                    "Dose Unit": "Spoon",
                    "Times": "2"
                }
            ]
        },
        "X4": {
            "1-5": [
                {
                    "Medicine": "Septran",
                    "Amount": 0.5,
                    "Dose Unit": "Tablet",
                    "Times": "2"
                }
            ]
        },
        "X5": {
            "1-5": [
                {
                    "Medicine": "Septran",
                    "Amount": 1,
                    "Dose Unit": "Tablet",
                    "Times": "2"
                }
            ]
        },
        "X6": {
            "1-5": [
                {
                    "Medicine": "Septran",
                    "Amount": 1,
                    "Dose Unit": "Tablet",
                    "Times": "2"
                }
            ]
        },
        "X7": {
            "1-5": [
                {
                    "Medicine": "Septran",
                    "Amount": 2,
                    "Dose Unit": "Tablet",
                    "Times": "2"
                }
            ]
        }
    },
    "Cifran-Special": {
        "X1": {
            "1-5": [
                {
                    "Medicine": "Cifran",
                    "Amount": 1,
                    "Dose Unit": "Tablet",
                    "Times": "2"
                }
            ]
        },
        "X2": {
            "1-5": [
                {
                    "Medicine": "Cifran",
                    "Amount": 1,
                    "Dose Unit": "Tablet",
                    "Times": "2"
                }
            ]
        },
        "X3": {
            "1-5": [
                {
                    "Medicine": "Cifran",
                    "Amount": 1,
                    "Dose Unit": "Tablet",
                    "Times": "2"
                }
            ]
        },
        "X4": {
            "1-5": [
                {
                    "Medicine": "Cifran",
                    "Amount": 1,
                    "Dose Unit": "Tablet",
                    "Times": "2"
                }
            ]
        },
        "X5": {
            "1-5": [
                {
                    "Medicine": "Cifran",
                    "Amount": 1,
                    "Dose Unit": "Tablet",
                    "Times": "2"
                }
            ]
        },
        "X6": {
            "1-5": [
                {
                    "Medicine": "Cifran",
                    "Amount": 1,
                    "Dose Unit": "Tablet",
                    "Times": "2"
                }
            ]
        },
        "X7": {
            "1-5": [
                {
                    "Medicine": "Cifran",
                    "Amount": 1,
                    "Dose Unit": "Tablet",
                    "Times": "2"
                }
            ]
        }
    },
    "Diarrhoea": {
        "X1": {
            "3": [
                {
                    "Medicine": "Furoxone Syrup",
                    "Amount": 0.5,
                    "Dose Unit": "Spoon",
                    "Times": 3
                },
                {
                    "Medicine": "Abdek Syrup",
                    "Amount": 0.5,
                    "Dose Unit": "Spoon",
                    "Times": 2
                }]
        },
        "X2": {
            "3": [
                {
                    "Medicine": "Furoxone Syrup",
                    "Amount": 1,
                    "Dose Unit": "Spoon Syrup",
                    "Times": 3
                },
                {
                    "Medicine": "Abdek Syrup",
                    "Dose Unit": "Spoon",
                    "Amount": 1,
                    "Times": 2
                }]
        },
        "X3": {
            "3": [
                {
                    "Medicine": "Furoxone Syrup",
                    "Amount": 2,
                    "Dose Unit": "Spoon",
                    "Times": 3
                },
                {
                    "Medicine": "Abdek Syrup",
                    "Amount": 1,
                    "Dose Unit": "Spoon",
                    "Times": 2
                }]
        },
        "X4": {
            "3": [
                {
                    "Medicine": "Furoxone",
                    "Amount": 0.5,
                    "Dose Unit": "Tablet",
                    "Times": 2
                },
                {
                    "Medicine": "BC",
                    "Amount": 0.5,
                    "Dose Unit": "Tablet",
                    "Times": 2
                }]
        },
        "X5": {
            "3": [
                {
                    "Medicine": "Furoxone",
                    "Amount": 0.5,
                    "Dose Unit": "Tablet",
                    "Times": 3
                },
                {
                    "Medicine": "BC",
                    "Amount": 0.5,
                    "Dose Unit": "Tablet",
                    "Times": 3
                }]
        },
        "X6": {
            "3": [
                {
                    "Medicine": "Furoxone",
                    "Amount": 1,
                    "Dose Unit": "Tablet",
                    "Times": 2
                },
                {
                    "Medicine": "BC",
                    "Amount": 1,
                    "Dose Unit": "Tablet",
                    "Times": 2
                }]
        },
        "X7": {
            "3": [
                {
                    "Medicine": "Furoxone",
                    "Amount": 1,
                    "Dose Unit": "Tablet",
                    "Times": 3
                },
                {
                    "Medicine": "BC",
                    "Amount": 1,
                    "Dose Unit": "Tablet",
                    "Times": 3
                }]
        }
    },
    "Vomiting": {
        "X1": {
            "3": [
                {
                    "Medicine": "Ondensetran Syrup",
                    "Amount": 1,
                    "Dose Unit": "ml",
                    "Times": "2"
                }
            ]
        },
        "X2": {
            "3": [
                {
                    "Medicine": "Ondensetran Syrup",
                    "Amount": 2,
                    "Dose Unit": "ml",
                    "Times": "2"
                }
            ]
        },
        "X3": {
            "3": [
                {
                    "Medicine": "Onden Syrup",
                    "Amount": 0.5,
                    "Dose Unit": "Spoon",
                    "Times": "2"
                }
            ]
        },
        "X4": {
            "3": [
                {
                    "Medicine": "Onden Syrup",
                    "Amount": 1,
                    "Dose Unit": "Spoon",
                    "Times": "2"
                }
            ]
        },
        "X5": {
            "3": [
                {
                    "Medicine": "Perinorm",
                    "Amount": 0.5,
                    "Dose Unit": "Tablet",
                    "Times": "2"
                }
            ]
        },
        "X6": {
            "3": [
                {
                    "Medicine": "Perinorm",
                    "Amount": 0.5,
                    "Dose Unit": "Tablet",
                    "Times": "2"
                }
            ]
        },
        "X7": {
            "3": [
                {
                    "Medicine": "Perinorm",
                    "Amount": 1,
                    "Dose Unit": "Tablet",
                    "Times": "2"
                }
            ]
        }
    },
    "Abdominal Pain": {
        "X1": {
            "2": [
                {
                    "Medicine": "Cyclopam Syrup",
                    "Amount": 0.5,
                    "Dose Unit": "Spoon",
                    "Times": "3"
                }
            ]
        },
        "X2": {
            "2": [
                {
                    "Medicine": "Cyclopam Syrup",
                    "Amount": 1,
                    "Dose Unit": "Spoon",
                    "Times": "3"
                }
            ]
        },
        "X3": {
            "2": [
                {
                    "Medicine": "Cyclopam Syrup",
                    "Amount": 1,
                    "Dose Unit": "Spoon",
                    "Times": "3"
                }
            ]
        },
        "X4": {
            "2": [
                {
                    "Medicine": "Cyclopam",
                    "Amount": 0.5,
                    "Dose Unit": "Tablet",
                    "Times": "2"
                }
            ]
        },
        "X5": {
            "2": [
                {
                    "Medicine": "Cyclopam",
                    "Amount": 0.5,
                    "Dose Unit": "Tablet",
                    "Times": "3"
                }
            ]
        },
        "X6": {
            "2": [
                {
                    "Medicine": "Cyclopam",
                    "Amount": 1,
                    "Dose Unit": "Tablet",
                    "Times": "2"
                }
            ]
        },
        "X7": {
            "2": [
                {
                    "Medicine": "Cyclopam",
                    "Amount": 1,
                    "Dose Unit": "Tablet",
                    "Times": "3"
                }
            ]
        }
    },
    "Acidity": {
        "X4": {
            "1-5": [
                {
                    "Medicine": "Famotidine",
                    "Amount": 0.5,
                    "Dose Unit": "Tablet",
                    "Times": "1"
                }
            ]
        },
        "X5": {
            "1-5": [
                {
                    "Medicine": "Famotidine",
                    "Amount": 0.5,
                    "Dose Unit": "Tablet",
                    "Times": "2"
                }
            ]
        },
        "X6": {
            "1-5": [
                {
                    "Medicine": "Famotidine",
                    "Amount": 1,
                    "Dose Unit": "Tablet",
                    "Times": "2"
                }
            ]
        },
        "X7": {
            "1-5": [
                {
                    "Medicine": "Famotidine",
                    "Amount": 1,
                    "Dose Unit": "Tablet",
                    "Times": "2"
                }
            ]
        }
    },
    "Boils": {
        "X1": {
            "1-5": [
                {
                    "Medicine": "Septran Syrup",
                    "Amount": 0.5,
                    "Dose Unit": "Spoon",
                    "Times": "2"
                }
            ]
        },
        "X2": {
            "1-5": [
                {
                    "Medicine": "Septran Syrup",
                    "Amount": 0.5,
                    "Dose Unit": "Spoon",
                    "Times": "2"
                }
            ]
        },
        "X3": {
            "1-5": [
                {
                    "Medicine": "Septran Syrup",
                    "Amount": 1,
                    "Dose Unit": "Spoon",
                    "Times": "2"
                }
            ]
        },
        "X4": {
            "1-5": [
                {
                    "Medicine": "Septran",
                    "Amount": 0.5,
                    "Dose Unit": "Tablet",
                    "Times": "2"
                }
            ]
        },
        "X5": {
            "1-5": [
                {
                    "Medicine": "Septran",
                    "Amount": 1,
                    "Dose Unit": "Tablet",
                    "Times": "2"
                }
            ]
        },
        "X6": {
            "1-5": [
                {
                    "Medicine": "Septran",
                    "Amount": 1,
                    "Dose Unit": "Tablet",
                    "Times": "2"
                }
            ]
        },
        "X7": {
            "1-5": [
                {
                    "Medicine": "Septran",
                    "Amount": 2,
                    "Dose Unit": "Tablet",
                    "Times": "2"
                }
            ]
        }
    },
    "Scabies": {
        "X1": {
            "3": [
                {
                    "Medicine": "Cetrizine Syrup",
                    "Amount": 0.25,
                    "Dose Unit": "Spoon",
                    "Times": "Once Evening"
                },
                {
                    "Medicine": "Scabizol",
                    "Amount": 0,
                    "Dose Unit": "Paste",
                    "Times": "Special Instruction"
                }
            ]
        },
        "X2": {
            "3": [
                {
                    "Medicine": "Cetrizine Syrup",
                    "Amount": 0.5,
                    "Dose Unit": "Spoon",
                    "Times": "Once Evening"
                },
                {
                    "Medicine": "Scabizol",
                    "Amount": 0,
                    "Dose Unit": "Paste",
                    "Times": "Special Instruction"
                }
            ]
        },
        "X3": {
            "3": [
                {
                    "Medicine": "Cetrizine Syrup",
                    "Amount": 0.5,
                    "Dose Unit": "Spoon",
                    "Times": "Once Evening"
                },
                {
                    "Medicine": "Scabizol",
                    "Amount": 0,
                    "Dose Unit": "Paste",
                    "Times": "Special Instruction"
                }
            ]
        },
        "X4": {
            "3": [
                {
                    "Medicine": "Cetrizine Syrup",
                    "Amount": 1,
                    "Dose Unit": "Spoon",
                    "Times": "Once Evening"
                },
                {
                    "Medicine": "Scabizol",
                    "Amount": 0,
                    "Dose Unit": "Paste",
                    "Times": "Special Instruction"
                }
            ]
        },
        "X5": {
            "3": [
                {
                    "Medicine": "Cetrizine",
                    "Amount": 0.5,
                    "Dose Unit": "Tablet",
                    "Times": "Once Evening"
                },
                {
                    "Medicine": "Scabizol",
                    "Amount": 0,
                    "Dose Unit": "Paste",
                    "Times": "Special Instruction"
                }
            ]
        },
        "X6": {
            "3": [
                {
                    "Medicine": "Cetrizine",
                    "Amount": 0.5,
                    "Dose Unit": "Tablet",
                    "Times": "Once Evening"
                },
                {
                    "Medicine": "Scabizol",
                    "Amount": 0,
                    "Dose Unit": "Paste",
                    "Times": "Special Instruction"
                }
            ]
        },
        "X7": {
            "3": [
                {
                    "Medicine": "Cetrizine",
                    "Amount": 1,
                    "Dose Unit": "Tablet",
                    "Times": "Once Evening"
                },
                {
                    "Medicine": "Scabizol",
                    "Amount": 0,
                    "Dose Unit": "Paste",
                    "Times": "Special Instruction"
                }
            ]
        }
    },
    "Ring Worm": {
        "X1": {
            "3-5": [
                {
                    "Medicine": "Cetrizine Syrup",
                    "Amount": 0.25,
                    "Dose Unit": "Spoon",
                    "Times": "Once Evening"
                },
                {
                    "Medicine": "Salicylic Acid",
                    "Amount": 0,
                    "Dose Unit": "Paste",
                    "Times": "Special Instruction"
                }
            ]
        },
        "X2": {
            "3-5": [
                {
                    "Medicine": "Cetrizine Syrup",
                    "Amount": 0.5,
                    "Dose Unit": "Spoon",
                    "Times": "Once Evening"
                },
                {
                    "Medicine": "Salicylic Acid",
                    "Amount": 0,
                    "Dose Unit": "Paste",
                    "Times": "Special Instruction"
                }
            ]
        },
        "X3": {
            "3-5": [
                {
                    "Medicine": "Cetrizine Syrup",
                    "Amount": 0.5,
                    "Dose Unit": "Spoon",
                    "Times": "Once Evening"
                },
                {
                    "Medicine": "Salicylic Acid",
                    "Amount": 0,
                    "Dose Unit": "Paste",
                    "Times": "Special Instruction"
                }
            ]
        },
        "X4": {
            "3-5": [
                {
                    "Medicine": "Cetrizine Syrup",
                    "Amount": 1,
                    "Dose Unit": "Spoon",
                    "Times": "Once Evening"
                },
                {
                    "Medicine": "Salicylic Acid",
                    "Amount": 0,
                    "Dose Unit": "Paste",
                    "Times": "Special Instruction"
                }
            ]
        },
        "X5": {
            "3-5": [
                {
                    "Medicine": "Cetrizine",
                    "Amount": 0.5,
                    "Dose Unit": "Tablet",
                    "Times": "Once Evening"
                },
                {
                    "Medicine": "Salicylic Acid",
                    "Amount": 0,
                    "Dose Unit": "Paste",
                    "Times": "Special Instruction"
                }
            ]
        },
        "X6": {
            "3-5": [
                {
                    "Medicine": "Cetrizine",
                    "Amount": 0.5,
                    "Dose Unit": "Tablet",
                    "Times": "Once Evening"
                },
                {
                    "Medicine": "Salicylic Acid",
                    "Amount": 0,
                    "Dose Unit": "Paste",
                    "Times": "Special Instruction"
                }
            ]
        },
        "X7": {
            "3-5": [
                {
                    "Medicine": "Cetrizine",
                    "Amount": 1,
                    "Dose Unit": "Tablet",
                    "Times": "Once Evening"
                },
                {
                    "Medicine": "Salicylic Acid",
                    "Amount": 0,
                    "Dose Unit": "Paste",
                    "Times": "Special Instruction"
                }
            ]
        }
    },
    "Body Ache": {
        "X1": {
            "3": [
                {
                    "Medicine": "Paracetamol Syrup",
                    "Amount": 0.5,
                    "Dose Unit": "Spoon",
                    "Times": 3
                }]
        },
        "X2": {
            "3": [
                {
                    "Medicine": "Paracetamol Syrup",
                    "Dose Unit": "Spoon",
                    "Amount": 1,
                    "Times": 3
                }]
        },
        "X3": {
            "3": [
                {
                    "Medicine": "Paracetamol Syrup",
                    "Amount": 1.5,
                    "Dose Unit": "Spoon",
                    "Times": 3
                }]
        },
        "X4": {
            "3": [
                {
                    "Medicine": "Paracetamol",
                    "Amount": 0.5,
                    "Dose Unit": "Tablet",
                    "Times": 2
                }]
        },
        "X5": {
            "3": [
                {
                    "Medicine": "Paracetamol",
                    "Amount": 0.5,
                    "Dose Unit": "Tablet",
                    "Times": 3
                }]
        },
        "X6": {
            "3": [
                {
                    "Medicine": "Paracetamol",
                    "Amount": 1,
                    "Dose Unit": "Tablet",
                    "Times": 2
                }]
        },
        "X7": {
            "3": [
                {
                    "Medicine": "Paracetamol",
                    "Amount": 1,
                    "Dose Unit": "Tablet",
                    "Times": 3
                }]
        }
    },
    "Pregnancy": {
        "X1": {
            "1-30": [
                {
                    "Medicine": "Iron",
                    "Amount": 1,
                    "Dose Unit": "Tablet",
                    "Times": 2
                },
                {
                    "Medicine": "Calcium",
                    "Amount": 1,
                    "Dose Unit": "Tablet",
                    "Times": 2
                }]
        },
        "X2": {
            "1-30": [
                {
                    "Medicine": "Iron",
                    "Amount": 1,
                    "Dose Unit": "Tablet",
                    "Times": 2
                },
                {
                    "Medicine": "Calcium",
                    "Amount": 1,
                    "Dose Unit": "Tablet",
                    "Times": 2
                }]
        },
        "X3": {
            "1-30": [
                {
                    "Medicine": "Iron",
                    "Amount": 1,
                    "Dose Unit": "Tablet",
                    "Times": 2
                },
                {
                    "Medicine": "Calcium",
                    "Amount": 1,
                    "Dose Unit": "Tablet",
                    "Times": 2
                }]
        },
        "X4": {
            "1-30": [
                {
                    "Medicine": "Iron",
                    "Amount": 1,
                    "Dose Unit": "Tablet",
                    "Times": 2
                },
                {
                    "Medicine": "Calcium",
                    "Amount": 1,
                    "Dose Unit": "Tablet",
                    "Times": 2
                }]
        },
        "X5": {
            "1-30": [
                {
                    "Medicine": "Iron",
                    "Amount": 1,
                    "Dose Unit": "Tablet",
                    "Times": 2
                },
                {
                    "Medicine": "Calcium",
                    "Amount": 1,
                    "Dose Unit": "Tablet",
                    "Times": 2
                }]
        },
        "X6": {
            "1-30": [
                {
                    "Medicine": "Iron",
                    "Amount": 1,
                    "Dose Unit": "Tablet",
                    "Times": 2
                },
                {
                    "Medicine": "Calcium",
                    "Amount": 1,
                    "Dose Unit": "Tablet",
                    "Times": 2
                }]
        },
        "X7": {
            "1-30": [
                {
                    "Medicine": "Iron",
                    "Amount": 1,
                    "Dose Unit": "Tablet",
                    "Times": 2
                },
                {
                    "Medicine": "Calcium",
                    "Amount": 1,
                    "Dose Unit": "Tablet",
                    "Times": 2
                }]
        }
    },
    "Wound": {
        "X1": {
            "1-5": [
                {
                    "Medicine": "Septran Syrup",
                    "Amount": 0.5,
                    "Dose Unit": "Spoon",
                    "Times": "2"
                }
            ]
        },
        "X2": {
            "1-5": [
                {
                    "Medicine": "Septran Syrup",
                    "Amount": 0.5,
                    "Dose Unit": "Spoon",
                    "Times": "2"
                }
            ]
        },
        "X3": {
            "1-5": [
                {
                    "Medicine": "Septran Syrup",
                    "Amount": 1,
                    "Dose Unit": "Spoon",
                    "Times": "2"
                }
            ]
        },
        "X4": {
            "1-5": [
                {
                    "Medicine": "Septran",
                    "Amount": 0.5,
                    "Dose Unit": "Tablet",
                    "Times": "2"
                }
            ]
        },
        "X5": {
            "1-5": [
                {
                    "Medicine": "Septran",
                    "Amount": 1,
                    "Dose Unit": "Tablet",
                    "Times": "2"
                }
            ]
        },
        "X6": {
            "1-5": [
                {
                    "Medicine": "Septran",
                    "Amount": 1,
                    "Dose Unit": "Tablet",
                    "Times": "2"
                }
            ]
        },
        "X7": {
            "1-5": [
                {
                    "Medicine": "Septran",
                    "Amount": 2,
                    "Dose Unit": "Tablet",
                    "Times": "2"
                }
            ]
        }
    },
};

var defaultWeightRangesToCode = [
    {start: 3.0, end: 5.5, code: "X1"},
    {start: 5.6, end: 7.9, code: "X2"},
    {start: 8.0, end: 13, code: "X3"},
    {start: 13, end: 15.9, code: "X4"},
    {start: 16, end: 25.5, code: "X5"},
    {start: 25.6, end: 32.5, code: "X6"},
    {start: 32.6, end: 1000, code: "X7"}
];

var weightRangesToCodeForLonartForte = [
    {start: 3.0, end: 5.5, code: "X0"},
    {start: 5.0, end: 14.0, code: "X1"},
    {start: 15, end: 24, code: "X2"},
    {start: 25, end: 34, code: "X3"},
    {start: 35, end: 1000, code: "X4"},
];

var complaintToWeightRangesToCodeMap = {
    "Chloroquine Resistant Malaria": weightRangesToCodeForLonartForte
};

var englishWordsToMarathi = {
    "Chloroquin": "क्लोरोक्विन",
    "Chloroquin Syrup": "क्लोरोक्विन सायरप",
    "Paracetamol Syrup": "पॅरासिटामॉल सायरप",
    "Paracetamol": "पॅरासिटामॉल",
    "Spoon": "चमचा",
    "Tablet": "टॅबलेट",
    "Cetrizine": "सेट्रीझीन",
    "Cetrizine Syrup": "सेट्रीझीन सायरप",
    "Furoxone Syrup": "फ्युरोक्सोन सायरप",
    "Furoxone": "फ्युरोक्सोन",
    "Abdek": "अबडक",
    "Abdek Syrup": "अबडक सायरप",
    "BC": "बीसी",
    "Perinorm": "पेरीनॉर्म",
    "Ondensetran Syrup": "ऑन्डेन सायरप",
    "Cyclopam Syrup": "सायरप सायक्लोपाम",
    "Cyclopam": "सायक्लोपाम",
    "Famotidine": "फॅमोटिडीन",
    "Septran Syrup": "सायरप सेप्ट्रान",
    "Septran": "सेप्ट्रान",
    "Scabizol": "खरजेचे औषध",
    "Salicylic Acid": "सॅलिसिलिक ऍसिड",
    "Iron": "लोहाच्या",
    "Calcium": "कॅल्शियम",
    "Lonart Forte": "लोनर्ट फोर्टे",
    "Onden Syrup": "सायरप ओंडेन",
    "Cifran": "सिफ्रान"
};

var dayInMarathi = {
    "1": "पहिल्या दिवशी",
    "2": "दुसऱ्या दिवशी",
    "3": "तिसऱ्या दिवशी"
};

var medicines = {
    "Abdek Syrup": {take: "Depends"},
    "BC": {take: "Depends"},
    "Calcium": {take: "After"},
    "Cetrizine": {take: "After"},
    "Cetrizine Syrup": {take: "After"},
    "Cifran": {take: "After"},
    "Chloroquin": {take: "After"},
    "Chloroquin Syrup": {take: "After"},
    "Cyclopam": {take: "After"},
    "Cyclopam Syrup": {take: "After"},
    "Famotidine": {take: "Before"},
    "Furoxone": {take: "Depends"},
    "Furoxone Syrup": {take: "Depends"},
    "Iron": {take: "After"},
    "Ondensetran Syrup": {take: "Depends"},
    "Onden Syrup": {take: "Depends"},
    "Paracetamol": {take: "After"},
    "Paracetamol Syrup": {take: "After"},
    "Perinorm": {take: "Depends"},
    "Lonart Forte": {take: "After"},
    "Salicylic Acid": {take: "After"},
    "Scabizol": {take: "After"},
    "Septran": {take: "After"},
    "Septran Syrup": {take: "After"}
};

var doseQuantityToMarathi = function (doseQuantity, doseUnit) {
    if (doseQuantity === 0.25) return "१/४";
    if (doseQuantity === 0.5 && doseUnit === "Spoon") return "अर्धा";
    if (doseQuantity === 0.5 && doseUnit === "Tablet") return "अर्धी";
    if (doseQuantity === 1) return "१";
    if (doseQuantity === 1.5) return "दीड";
    if (doseQuantity === 2) return "२";
    if (doseQuantity === 3) return "३";
    if (doseQuantity === 4) return "४";
    console.error("Dose quantity - " + doseQuantity + " for dose unit - " + doseUnit + " is not supported");
};

var dosageTimingToMarathi = function (complaint, times) {
    if (times === 1 || times === "1") return "दिवसातून एकदा";
    if (times === 2 || times === "2") return "दिवसातून दोन वेळा";
    if (times === 3 || times === "3") return "दिवसातून तीन वेळा";
    if (times === "Once Evening") return "रोज संध्याकाळी एकदा";
    if (times === "Special Instruction" && complaint === "Scabies") return "औषध मानेपासून संपूर्ण अंगास आंघोळीनंतर लावणे आणि कपडे १ तास गरम पाण्यात उकाडविणे";
    if (times === "Special Instruction" && complaint === "Ring Worm") return "गजकर्णाच्या जागेवर लावण्यास सांगावे";
    console.error("Number of times " + times + " not supported yet");
};

var getDoseUnitMessage = function (daysPrescription) {
    if (daysPrescription["Dose Unit"] === "Spoon")
        return daysPrescription.Amount < 2 ? "चमचा" : "चमचे";
    else if (daysPrescription["Dose Unit"] === "ml")
        return "ml";
    return "टॅबलेट";
};

var getKeys = function (obj) {
    var keys = [];
    for (var key in obj) {
        keys.push(key);
    }
    return keys;
};

var getWeightRangeToCode = function (complaint, weight) {
    var weightRangeToCodeMap = complaintToWeightRangesToCodeMap[complaint];
    if (weightRangeToCodeMap === undefined || weightRangeToCodeMap === null)
        weightRangeToCodeMap = defaultWeightRangesToCode;

    var weightRangeToCode = weightRangeToCodeMap.find(function (entry) {
        return entry.start <= weight && entry.end > weight;
    });
    return weightRangeToCode;
};

var getDecision = function (ruleContext) {
    var weight = ruleContext.getAnswerFor('Weight');
    var complaints = ruleContext.getCodedAnswerFor('Complaint');
    var age = ruleContext.getAnswerFor('Age');
    var sex = ruleContext.getCodedAnswerFor('Sex')[0];
    complaints = complaints.filter(function (item) {
        return item == 'Malaria';
    }).concat(complaints.filter(function (item) {
        return item != 'Malaria'
    }));
    var potentiallyPregnant = (sex === "Female" && (age >= 16 && age <= 40));
    var decisions = [];
    var prescribedMedicines = [];

    for (var complaintIndex = 0; complaintIndex < complaints.length; complaintIndex++) {
        var weightRangeToCode = getWeightRangeToCode(complaints[complaintIndex], weight);
        var decision = {};
        decision.name = "Treatment";
        decision.code = weightRangeToCode.code;

        var prescriptionSet = (potentiallyPregnant && ["Cough", "Boils", "Wound"].indexOf(complaints[complaintIndex]) !== -1) ? treatmentByComplaintAndCode["Cifran-Special"] : treatmentByComplaintAndCode[complaints[complaintIndex]];

        var prescription = prescriptionSet[weightRangeToCode.code];
        if (prescription === null || prescription === undefined) {
            throw "No prescription defined for " + complaints[complaintIndex] + " for weight: " + weight + ", calculated code: " + weightRangeToCode.code;
        }

        var message = "";
        var dayTokens = getKeys(prescription);
        for (var token = 0; token < dayTokens.length; token++) {
            var firstToken = dayTokens[0];

            var daywisePrescription = dayTokens.length !== 1 && firstToken === "1";
            if (daywisePrescription) {
                message += dayInMarathi[dayTokens[token]];
                message += "\n";
            }

            for (var medicineIndex = 0; medicineIndex < prescription[dayTokens[token]].length; medicineIndex++) {
                var daysPrescription = prescription[dayTokens[token]][medicineIndex];
                if (prescribedMedicines.indexOf(daysPrescription.Medicine) === -1) {
                    prescribedMedicines.push(daysPrescription.Medicine);
                } else if (prescribedMedicines.indexOf(daysPrescription.Medicine) !== -1 && !daywisePrescription) {
                    continue;
                }

                if (dayTokens.length === 1 && firstToken !== "1") {
                    if (firstToken === "3-5")
                        message += "३ किंवा ५ दिवसांसाठी";
                    else if (firstToken === "1-5")
                        message += "१ ते ५ दिवस";
                    else if (firstToken === "3")
                        message += "३ दिवस";
                    else if (firstToken === "2")
                        message += "२ दिवस";

                    message += "\n";
                }

                message += englishWordsToMarathi["" + daysPrescription.Medicine];
                message += " ";
                if (daysPrescription.Times !== "Special Instruction") {
                    message += doseQuantityToMarathi(daysPrescription.Amount, daysPrescription["Dose Unit"]);
                    message += " ";
                    message += getDoseUnitMessage(daysPrescription);
                    message += " ";
                }
                message += dosageTimingToMarathi(complaints[complaintIndex], daysPrescription.Times);
                message += medicines[daysPrescription.Medicine].take === "Before" ? "Before food" : "";
                message += "\n";
            }
            message += "\n";
        }
        decision.value = message;

        if (weight >= 13 && complaints.indexOf('Malaria') !== -1)
            decision.alert = "क्लोरोक्विन व पॅरासिटामॉल ही औषधे जेवल्यावर खायला सांगावी";
        else if (complaints.indexOf('Vomiting') !== -1)
            decision.alert = "उलटी असल्यास आधी औषध द्यावे व अर्ध्या तासांनंतर जेवण, दुध द्यावे व अर्ध्या तासांनंतर इतर औषधे द्यावीत";
        else if (complaints.indexOf('Chloroquine Resistant Malaria') !== -1 && (age >= 16 || age <= 40) && sex === "Female") {
            decision.alert = "पुढे दवाखान्यात पाठवावे";
            decision.value = "";
        }

        decisions.push(decision);
    }

    return decisions;
};

var validate = function (ruleContext) {
    var complaints = ruleContext.getCodedAnswerFor('Complaint');
    var age = ruleContext.getDurationInYears('Age');
    var sex = ruleContext.getCodedAnswerFor('Sex')[0];
    var weight = ruleContext.getAnswerFor('Weight');

    var validationResult = {
        "passed": false,
        "message": ""
    };

    for (var complaintIndex = 0; complaintIndex < complaints.length; complaintIndex++) {
        var weightRangeToCode = getWeightRangeToCode(complaints[complaintIndex], weight);

        if (sex === 'Male' && complaints.indexOf('Pregnancy') !== -1) {
            validationResult.passed = false;
            validationResult.message += "पुरुष गरोदर राहू शकत नाही. ";
        } else if (complaints.indexOf('Pregnancy') !== -1 && age < 10) {
            validationResult.passed = false;
            validationResult.message += "वय वर्ष १० च्या खाली महिला गरोदर राहू शकत नाही. ";
        } else if (weightRangeToCode.code === "X0" || (complaints.indexOf('Acidity') !== -1 && weight < 13)) {
            // ५ किलो पेक्षा कमी वजनास लोनर्ट देऊ नये
            validationResult.passed = false;
            validationResult.message += "५ किलो पेक्षा कमी वजनास लोनर्ट देऊ नये. ";
        } else {
            validationResult.passed = true;
        }
    }

    return validationResult;
};

module.exports = {
    getDecision: getDecision,
    treatmentByComplaintAndCode: treatmentByComplaintAndCode,
    weightRangesToCode: defaultWeightRangesToCode,
    validate: validate
};